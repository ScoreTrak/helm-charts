# Default values for server.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Deployment replica count
replicaCount: 1

image:
  # -- Container image name
  repository: ghcr.io/scoretrak/scoretrak/scoretrak-server
  # -- Container image name
  pullPolicy: IfNotPresent
  # -- Container image tag
  tag: "v0.2.0"

# -- Secrets to pull container image
imagePullSecrets: []
# -- String to override server.name template
nameOverride: ""
# -- String to override server.fullname template
fullnameOverride: ""

serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# -- Additional annotations for StatefulSet Pods
podAnnotations: {}

service:
  # -- Service type for server service
  type: ClusterIP
  grpc:
    # -- Internal grpc port to expose for Service
    internalPort: 380
    # -- External grpc port to expose for Service
    externalPort: 380

# -- Resource requests and limits for Deployment Pods
resources: {}

# -- Flag to server whether this is a production deployment or dev deployment
production: false

# GLOBAL VALUES

global:
  nsqlookupd:
    replicaCount: 3

# COCKROACHDB HELM CHART VALUES

cockroachdb:
  # -- Specifies whether to create a cockroachdb instance
  create: true
  statefulset:
    replicas: 3
    resources:
      limits:
        memory: "2Gi"
      requests:
        memory: "2Gi"
  storage:
    persistentVolume:
      enabled: false
      size: "5Gi"
  conf:
    cache: "500Mi"
    max-sql-memory: "500Mi"
    max-offset: 1000ms
  tls:
    enabled: true

# NSQ HELM CHART VALUES

nsqd:
  # -- Specifies whether to use nsqd
  use: true
  replicaCount: 3
  persistentVolume:
    enabled: false